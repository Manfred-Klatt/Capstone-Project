<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AC:NH ID Game - Leaderboards</title>
    <style>
        @font-face {
            font-family: 'ACfont';
            src: url('fonts/ACfont.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        :root {
            --background-color: #f0f8ff;
            --text-color: #5a3d2b;
            --container-bg: #fff9f0;
            --border-color: #8b4513;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: "ACfont", "Arial", sans-serif;
            margin: 0;
            padding: 20px;
            text-align: center;
            background-color: var(--background-color);
            color: var(--text-color);
            background-image: url("images/background.jpg");
            background-size: cover;
            background-position: center;
        }

        #leaderboard-container {
            background-color: var(--container-bg);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 15px var(--shadow-color);
            border: 3px solid var(--border-color);
            width: 95%;
            max-width: 1200px;
            margin: 0 auto;
            box-sizing: border-box;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        .category-leaderboard {
            background-color: #fff9f0;
            margin: 10px;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid var(--border-color);
            flex: 1;
            min-width: 250px;
            max-width: 350px;
        }

        .category-leaderboard h3 {
            color: var(--text-color);
            margin-bottom: 10px;
        }

        .category-leaderboard ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .category-leaderboard li {
            padding: 8px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .category-leaderboard li:last-child {
            border-bottom: none;
        }

        .back-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #4CAF50;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .back-btn:hover {
            background-color: #45a049;
        }
        
        /* Media Queries for Mobile Responsiveness */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            #leaderboard-container {
                padding: 15px;
                width: 100%;
            }
            
            .category-leaderboard {
                min-width: 220px;
                padding: 10px;
            }
            
            /* Adjust admin tools for mobile */
            #admin-toggle-btn {
                top: 5px;
                left: 5px;
                padding: 6px 10px;
                font-size: 12px;
            }
            
            .back-btn {
                top: 5px;
                right: 5px;
                padding: 6px 10px;
                font-size: 12px;
            }
        }
        
        @media (max-width: 480px) {
            .category-leaderboard {
                min-width: 100%;
                margin: 10px 0;
            }
            
            #admin-tools-container {
                width: 180px;
                padding: 10px;
            }
            
            #admin-tools-container button {
                padding: 6px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Admin Tools Toggle Button -->
    <button id="admin-toggle-btn" style="
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: #4a90e2;
      padding: 8px 12px;
      border-radius: 6px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s ease !important;
    ">
      <span id="admin-toggle-text">Show Admin Tools</span>
    </button>

    <style>
      #admin-toggle-btn:hover {
        background-color: #357abd !important;
      }

      #admin-tools-container {
        width: 200px;
        position: absolute;
        top: 50px;
        left: 10px;
        background-color: #fff9f0;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border: 2px solid #8b4513;
        z-index: 100;
      }
      
      #admin-tools-container h2 {
        margin-bottom: 10px;
        border-bottom: 2px solid #8b4513;
        padding-bottom: 5px;
        color: #5a3d2b;
      }
      
      #admin-tools-container button {
        display: block;
        width: 100%;
        margin-bottom: 10px;
        padding: 8px;
        background-color: #6b8e23;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      
      #admin-tools-container button:hover {
        background-color: #556b2f;
      }

      #leaderboard-container {
        margin-top: 20px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        max-width: 800px;
        margin: 0 auto;
      }

      .category-leaderboard {
        background-color: #fff9f0;
        padding: 15px;
        border-radius: 10px;
        border: 2px solid #8b4513;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .category-leaderboard h3 {
        color: #5a3d2b;
        margin-bottom: 10px;
        border-bottom: 2px solid #8b4513;
        padding-bottom: 5px;
      }

      .category-leaderboard ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .category-leaderboard li {
        padding: 8px;
        border-bottom: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;

      }

      .category-leaderboard li {
        padding: 8px;
        border-bottom: 1px solid #ddd;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .category-leaderboard li span:first-child {
        color: #ffa500;
      }

      .category-leaderboard li:nth-child(1) span {
        color: #ffd700 !important;
        font-weight: bold !important;
      }

      .category-leaderboard li:nth-child(2) span {
        color: #c0c0c0 !important;
        font-weight: bold !important;
      }

      .category-leaderboard li:nth-child(3) span {
        color: #cd7f32 !important;
        font-weight: bold !important;
      }

      .category-leaderboard li:last-child {
        border-bottom: none;
      }
    </style>

    <div id="admin-tools-container">
      <h2>Admin Tools</h2>
      <button id="reset-fish-btn">Reset Fish Scores</button>
      <button id="reset-bugs-btn">Reset Bugs Scores</button>
      <button id="reset-sea-btn">Reset Sea Scores</button>
      <button id="reset-villagers-btn">Reset Villagers Scores</button>
      <button id="reset-all-btn">Reset All Leaderboards</button>
      <button id="reset-to-defaults-btn">Reset to Defaults</button>
    </div>

    <button class="back-btn" onclick="window.location.href='game.html'">Back to Game</button>
    <div id="leaderboard-container">
        <div class="category-leaderboard" id="fish-leaderboard">
            <h3>Fish</h3>
            <div id="fish-scores"></div>
        </div>
        <div class="category-leaderboard" id="bugs-leaderboard">
            <h3>Bugs</h3>
            <div id="bugs-scores"></div>
        </div>
        <div class="category-leaderboard" id="sea-leaderboard">
            <h3>Sea Creatures</h3>
            <div id="sea-scores"></div>
        </div>
        <div class="category-leaderboard" id="villagers-leaderboard">
            <h3>Villagers</h3>
            <div id="villagers-scores"></div>
        </div>
    </div>

    <script>
        // Load leaderboard data
        async function loadLeaderboards() {
            try {
                const response = await fetch('leaderboard.json');
                const data = await response.json();
                
                // Update each category's leaderboard
                updateLeaderboard('fish', data.fish);
                updateLeaderboard('bugs', data.bugs);
                updateLeaderboard('sea', data.sea);
                updateLeaderboard('villagers', data.villagers);
            } catch (error) {
                console.error('Error loading leaderboard:', error);
            }
        }

        function updateLeaderboard(category, scores) {
            const container = document.getElementById(`${category}-scores`);
            if (!container) return;

            const ul = document.createElement('ul');
            scores.forEach((score, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span style="color: var(--text-color)">${index + 1}. ${score.name}</span>
                    <span style="color: #4CAF50">${score.score}</span>
                `;
                ul.appendChild(li);
            });
            container.innerHTML = '';
            container.appendChild(ul);
        }

        // Load leaderboards when page loads
        document.addEventListener('DOMContentLoaded', loadLeaderboards);

        // Admin Tools Toggle
        const adminToggleBtn = document.getElementById('admin-toggle-btn');
        const adminToolsContainer = document.getElementById('admin-tools-container');
        const adminToggleText = document.getElementById('admin-toggle-text');

        adminToggleBtn.addEventListener('click', () => {
            const isHidden = adminToolsContainer.style.display === 'none';
            adminToolsContainer.style.display = isHidden ? 'block' : 'none';
            adminToggleText.textContent = isHidden ? 'Hide Admin Tools' : 'Show Admin Tools';
        });

        // Reset Functions
        async function resetLeaderboard(category) {
            try {
                const response = await fetch('reset-leaderboard.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ category })
                });
                const data = await response.json();
                if (data.success) {
                    // Reload leaderboards after reset
                    loadLeaderboards();
                }
            } catch (error) {
                console.error('Error resetting leaderboard:', error);
            }
        }

        // Reset All Leaderboards
        document.getElementById('reset-all-btn').addEventListener('click', () => {
            if (confirm('Are you sure you want to reset ALL leaderboards? This action cannot be undone.')) {
                resetLeaderboard('all');
            }
        });

        // Reset to Defaults
        document.getElementById('reset-to-defaults-btn').addEventListener('click', () => {
            if (confirm('Are you sure you want to reset all leaderboards to their default values? This action cannot be undone.')) {
                resetLeaderboard('defaults');
            }
        });



        // Load leaderboards when page loads
        document.addEventListener('DOMContentLoaded', loadLeaderboards);

    </script>
</body>
</html>
