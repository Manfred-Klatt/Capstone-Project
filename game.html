<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animal Crossing Quiz</title>
    <link rel="stylesheet" href="game.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Font loading -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fontfaceobserver/2.3.0/fontfaceobserver.standalone.js"></script>
    <script src="js/fontOptimizer.js"></script>
    <script src="js/backgroundLoader.js"></script>
    <script src="js/htmlSanitizer.js"></script>
    
    <!-- Sound effects -->
    <audio id="correct-sound" preload="auto">
        <source src="sounds/correct.ogg" type="audio/ogg">
    </audio>
    <audio id="game-over-sound" preload="auto">
        <source src="sounds/game-over.ogg" type="audio/ogg">
    </audio>
    <audio id="high-score-sound" preload="none">
        <source src="sounds/high-score.ogg" type="audio/ogg">
    </audio>
    <audio id="new-round-sound" preload="none">
        <source src="sounds/new-round.ogg" type="audio/ogg">
    </audio>
    <audio id="toggle-sound" preload="none">
        <source src="sounds/toggle.ogg" type="audio/ogg">
    </audio>
</head>
<body>
    <div id="fixed-nav-bar">
        <div class="nav-left">
            <a href="index.html" class="home-button">
                <img src="images/home.png" alt="Home" class="nav-icon">
                <span>Home</span>
            </a>
        </div>
        <div class="nav-center">
            <h1>Animal Crossing Quiz</h1>
        </div>
        <div class="nav-right">
            <div class="sound-toggle" id="sound-toggle">
                <img src="images/speaker.png" alt="Sound">
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="game-container">
            <div class="game-header">
                <div class="score-container">
                    <span>Score: <span id="score">0</span></span>
                    <span>High Score: <span id="high-score">0</span></span>
                </div>
                <div class="timer-container">
                    <span>Time: <span id="game-timer">60</span>s</span>
                </div>
            </div>

            <div class="game-area">
                <div class="image-container">
                    <img id="image-display" src="" alt="Animal Crossing character or item">
                </div>

                <div class="input-container">
                    <input type="text" id="guess-input" placeholder="Who's that villager?" autocomplete="off">
                    <button id="submit-guess" class="btn">Submit</button>
                </div>

                <div class="feedback" id="feedback"></div>

                <div class="controls">
                    <button id="start-game-btn" class="btn btn-primary">Start Game</button>
                    <button id="next-btn" class="btn btn-secondary" disabled>Next</button>
                </div>
            </div>

            <div class="category-selector">
                <select id="category" class="category-dropdown">
                    <option value="fish">Fish</option>
                    <option value="bugs">Bugs</option>
                    <option value="sea">Sea Creatures</option>
                    <option value="villagers">Villagers</option>
                </select>
            </div>

            <div class="leaderboard-container" style="margin-top: 20px;">
                <h3>Top Scores</h3>
                <ul id="leaderboard" class="leaderboard-list">
                    <!-- Leaderboard entries will be populated by JavaScript -->
                </ul>
            </div>
        </div>
    </div>

    <!-- Game script must be loaded last -->
    <script src="game.js"></script>
    
    <!-- Game Mode Configuration -->
    <script>
      // Always use local storage for game data
      window.standaloneMode = true;
    </script>
    
    <script>
      // Initialize game when DOM is loaded
      document.addEventListener('DOMContentLoaded', function() {
        // Sound toggle functionality
        const soundToggle = document.getElementById('sound-toggle');
        if (soundToggle) {
          soundToggle.addEventListener('click', function() {
            const soundManager = window.soundManager;
            if (soundManager) {
              soundManager.toggleSound();
              const img = this.querySelector('img');
              if (img) {
                img.src = soundManager.enabled ? 'images/speaker.png' : 'images/speaker-mute.png';
              }
            }
          });
        }
        
        // Home button functionality
        const homeButton = document.querySelector('.home-button');
        if (homeButton) {
          homeButton.addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'index.html';
          });
        }
      });
    </script>
</body>
</html>
